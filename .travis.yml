dist: trusty
sudo: required
branches:
  only:
  - master
env:
  matrix:
  - TF_INPUT=false
  global:
  - secure: 1Bk8YWSpf44wNVQqWVweQtT6LOM3p4bfl9KR+ajvEZS2u48N6lKlMnqF33aLPDopQzJsA8TjjQKcP2STcofai4MlVEzzObqIXSAaSIdZ5Dw/EOkXMB07eUjLxWGGOSGP+N1xcYoYA1HxqaIMHPLQs7vZoAnLMT/4XFi9eKr82lL0ViEh6UqBrN1tZnP/eouE28yRz3KUjveJXOWgSKbWRB2H8jlDax0QDXMQa2Tqdc7Mf6TXt+QdAuPLk9JFmpkfMRpcMxzzPjnqALUIbc+XG27RBswkUl7q++HrrMpmqn0vZ7Bg/OaPUy1bDoN+wocn7+Fnw+IgLgeJWV1JEF2guC/a1kbsqqZKTpH3+57OlI0KxJx4VfVZqx5Hco05UScVMomw5J9S9KfEGUNsJ3LLmMRd1ws2NYB2JAs3pHwwRl6tGRZuGnqeEz9/YYaL+4c4upVw7K60BL/EuvS56ZHBBtkt41jDKQAhUq1E89ZyV76JDnehDyvzGkrBVnky+wdWsKfoGrpDg6KB0yvEQ0vDJFq97r3OTpK38dg9Bo/GAS7yH/fWrWPmExprDmyxiY8T3vMBCgHv5eifdaDzyjZGQ23YFt/z/2Cdp8zVTPAkGP0lg8iPjLjrjuhHYmgQN5B5ZpY7Vsz21D2JHolOjRqXlAO9xq/M4H6O0ZFjrIw69Ks=
  - secure: mOwFHK9K0zYtMCUqgF4BuQArZnZ9x9rIcIk4n4cP+/PVy+lzoJStu6cpu19qilOYv6ivRHtZ80rv0wQTvyZv+TelI5p0pQD1zIWMYEBW6ieUW3967yBj1RurxzTGidjs5NuxLHNVv85SQUeHqVW8hUtW5b8IWIpzz7+MIu1KW0e+m8f4g01vQL5ezSdAFWs8zoX6k+YgocT5Yiw7OMJ/jew5BNHIQ7sBv74uS4gR+XyHxekUF1pRRp7CcPujkuxTSjunt08gWPuLVh1NnhGoTSDU0sMXA4v9ipBDBq4QbTDSF7AzCS+HvGmMDdKZzl+TZjl/K77x8NsDjyO89C6dXnh08n6Lc6ZPWjzRSOpof5Exfc7S4Ht+qWS8PItxVOMY2AEpmGSH5tqKUYRnqngM2snAbkPbtB/3W5pq7xTWBMAI7cfjUHVSCJmxFTsLWWTd/3rcA8ZF5dDAcuYdDFo6cJhRbIBWD85H67gRdo79MqKFs5LsX68DvG+7WbbU6LgC1P0+L9O5sfJuiYuB2eEoSXAeZ/3OqcSDZ2UkynKGpMgawbYsQr+czB614tD+EZLMGEoniPukAQ+ks7t/og2cPBXjCeqMVaSYtQko52vIyDAQ21XJWAREtGaBV6D4N6hhvSao84joHLRhrcREyg5tB487qS+1JYcWyE3pessAx6A=
  - secure: VymMi0iXjN4faMj9Q+FPjN+eOfEMQ+Vnh2Bf4oSlVmFI8dOqIu5+OYJD6YGrizyNxNH2wL43Vsux0cuC0+W7ZkST4ckmwLrSVwCXe6/pFF8Cp6gHTVEQkYsawSpIAy+hIiVreoVN/eTF3s7hQ4iF/1VCPd3k4aVJXZ0A6Mn9p4EzAkyK0MuKMQrEfz+tAFuUJVOZ5MYK6nxa2krsIPd9mXE5xjR0iU4cjDRs6i00ykWVHhfZnFzK6SYag2VfxVu/SRn4QU5+IbVxcNztTK4mt9dqUCu4Wj5fSHZXZJLTtzcBK67+yOYoBICTYmJQGSLk0VydmhwNbPyneNUzq+ohZA0kscJpK83Gg4vtDmb8tdgau9lXZpY28JJP9Lxp81Nb5qzky1TWw1B5E+5qi6IzX+yjMjwEb5X5IdVjJrDS+cL2q9EnIPUugFf2rEKJg/GYVV4XMqX0CWrpOCIbjt6cTAf8srdCr3cRjJQz0KxhjhCL2oNrMPG23Oo/fm0i5nCNj4TvpzpaSvqKexy4yJCGrYMO3hFQh/hyMT7LoLWR6+g6AuXA9QIbW1TJA6H1QsaBxaGcROTTnKXIxenWYqMkxlaKkFth6qgas1iqcnzaJPnEVkPE+KDlYG9nR6DGs/LdMCvWilNgrmFesGUtK/wKLv6ct3M+0XDB+tdBUTl615Q=
  - secure: EB/L22qspTWhaxIHGxRV3EUEuoejF2SzvOY7KHGJrYJIAZTX1djl5E+50aBkFxDnc2R6hCt2P78c2J/NAu0zAQ61t0O1eiJTjssvX767x8xTx2Embd1E8Xmyd7Cj94mUEI6iKyTXDcIUMzKWFZEicdTKMPPPrtINRv+7SMygw8W9kAa8ZgWIvbi7qPdlxK3h/QC9sShNnXFuu7g3eeU5AZR0lcXvHybRaoJ9WuIPyO+3IkwG3VRWC7y/ZPy9kqQHZIBU2q/Ez/+8N34iLcCGloE/eJieYNpzM0v1lkG+Sov1STwfywtTMRJ7SyHXJAxQ1ai8NuYck1dpmbBuUeg+ohBLCKW4Eo61NtZlPbJYtWqIhlikDgObbpE+3v7zLBdxKd2Hhde2bwiAMB6Xye3hiQgr+h92jdwgNXEwM2YMUOaqOvSQ034lx3ItlNGCjyTUweGsIbZR4yipdknlcjMj9+HcOcrso8ps/8Ujqs7PJPBjkPBqX06nrfPGaYu5AqfZS1uAvmZpIZxBXfManhw9ucCA6Wyuienwsr2xRE+jRzdCKzfq4H6wVEv44XD16jsyM3zOypkA2x1G3dUNko7dZ6uAM9dVVHnjIeRc0VH9LUoQfuW9Vnlcsrfd1HcxbgILhtaBIu0TBN2D7bkmHduzr8EhtPXNgy9HIGKg1OfYEmw=
before_install:
- curl -sLo /tmp/terraform.zip https://releases.hashicorp.com/terraform/0.8.8/terraform_0.8.8_linux_amd64.zip
- unzip /tmp/terraform.zip -d /tmp
- mkdir ~/bin
- mv /tmp/terraform ~/bin
- export PATH="~/bin:$PATH"
install: make install
script: terraform plan -var-file=./terraform/environments/staging.tfvars ./terraform
deploy:
- provider: script
  skip_cleanup: true
  script: terraform apply -var-file=./terraform/environments/production.tfvar ./terraform
  on:
    branch: master
